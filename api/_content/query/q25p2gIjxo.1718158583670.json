{"_path":"/blog/ovirt/engine/maven","_dir":"engine","_draft":false,"_partial":false,"_locale":"","title":"ovirt-engine maven","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"ovirt-engine-maven"},"children":[{"type":"text","value":"ovirt-engine maven"}]},{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ovirt-engine是一个由maven组织起来java项目，其中也包括makefile、package或otopi plugin等其他手段来协助完成打包、验证、开发环境准备、初始化等工作，但主要的是maven，在分析梳理项目或导入项目的时候都可以以pom.xml为入口。一个大型项目通常都是由几个小项目或者模块组成的，通过pom.xml定义的关系和包含的mvn plugin可以快速的了解每个子项目的作用从而理解整个项目。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如来make install-dev中出现错误的时候，一般应当找到对应报错的maven项目，切换到该项目目录，分析出错的maven命令的原因，这样就可以了解深层次的错误原因而不是看到报错一筹莫展。"}]},{"type":"element","tag":"h2","props":{"id":"maven"},"children":[{"type":"text","value":"maven"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"maven的学习资料比较多，可以通过阅读"},{"type":"element","tag":"a","props":{"href":"https://segmentfault.com/a/1190000014136187","rel":["nofollow"]},"children":[{"type":"text","value":"参考1"}]},{"type":"text","value":"、"},{"type":"element","tag":"a","props":{"href":"https://juejin.im/entry/5b0fa70af265da090e3df499","rel":["nofollow"]},"children":[{"type":"text","value":"参考2"}]},{"type":"text","value":"、"},{"type":"element","tag":"a","props":{"href":"http://jolestar.com/dependency-management-tools-maven-gradle/","rel":["nofollow"]},"children":[{"type":"text","value":"参考3"}]},{"type":"text","value":"、"},{"type":"element","tag":"a","props":{"href":"http://www.cnblogs.com/davenkin/p/advanced-maven-multi-module-vs-inheritance.html","rel":["nofollow"]},"children":[{"type":"text","value":"参考4"}]},{"type":"text","value":"、"},{"type":"element","tag":"a","props":{"href":"http://maven.apache.org/guides/getting-started/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"官网"}]},{"type":"text","value":"和"},{"type":"element","tag":"a","props":{"href":"https://item.jd.com/10476794.html","rel":["nofollow"]},"children":[{"type":"text","value":"书"}]},{"type":"text","value":"来学习。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"个人感觉可以和npm类比的学习"},{"type":"element","tag":"a","props":{"href":"https://codeday.me/bug/20181204/432991.html","rel":["nofollow"]},"children":[{"type":"text","value":"参考5"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"maven本只提供了一个执行环境，真正的操作项目的是由插件来执行的，例如编译java的compile插件、打包的jar插件等等。在安装完maven后会有内置的默认插件，全部定义在所有maven都需要集成的Super Pom里面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"除了maven默认插件之外，熟练使用丰富的外部 plugin是学习maven的另一个重点。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"每个plugin都可以通过mvn "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"plugin"}]},{"type":"text","value":":"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"action"}]},{"type":"text","value":"的方式使用其提供的服务。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"例如tomcat-maven-plugin："}]},{"type":"element","tag":"pre","props":{"code":"mvn tomcat:deploy   --部署一个web war包\nmvn tomcat:reload   --重新加载web war包\nmvn tomcat:start    --启动tomcat\nmvn tomcat:stop    --停止tomcat\nmvn tomcat:undeploy --停止一个war包\nmvn tomcat:run  --启动嵌入式tomcat ，并运行当前项目\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"mvn tomcat:deploy   --部署一个web war包\nmvn tomcat:reload   --重新加载web war包\nmvn tomcat:start    --启动tomcat\nmvn tomcat:stop    --停止tomcat\nmvn tomcat:undeploy --停止一个war包\nmvn tomcat:run  --启动嵌入式tomcat ，并运行当前项目\n"}]}]},{"type":"element","tag":"h2","props":{"id":"pomxml"},"children":[{"type":"text","value":"pom.xml"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在engine项目中的root pom.xml中定义了5个module，"}]},{"type":"element","tag":"pre","props":{"code":"build-tools-root： 包含静态检查的一些通用规则配置文件,如checkstyle\\findbugs\nbackend：   后台业务逻辑代码\nfrontend:   前台业务逻辑代码\near：          定义jboss运行时的内外部依赖和业务逻辑代码中不同子项目的打包方式、URL映射关系\nmavenmake:      执行make install-dev\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"build-tools-root： 包含静态检查的一些通用规则配置文件,如checkstyle\\findbugs\nbackend：   后台业务逻辑代码\nfrontend:   前台业务逻辑代码\near：          定义jboss运行时的内外部依赖和业务逻辑代码中不同子项目的打包方式、URL映射关系\nmavenmake:      执行make install-dev\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"详细分析见下图:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"ovirt-engine-maven-pom","src":"https://github.com/ShaneDean/file/raw/eb68d3da19b6bb1d293900288228650ee4b43f9b/blog/ovirt_engine_env/ovirt-engine-maven-pom.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"plugin"},"children":[{"type":"text","value":"plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"engine中各个项目中用到的插件汇总如下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-resources-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-surefire-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-ejb-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-source-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-checkstyle-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-enforcer-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-war-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-deploy-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-javadoc-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ovirt-jboss-modules-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-compiler-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"findbugs-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-shade-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-dependency-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exec-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-jaxb22-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"build-helper-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-antrun-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"libsass-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"gwt-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-processor-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-clean-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lifecycle-mapping"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-ear-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"taglist-maven-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-jar-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"maven-assembly-plugin"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"animal-sniffer-maven-plugin"}]}]},{"type":"element","tag":"h3","props":{"id":"ovirt-jboss-modules-maven-plugin"},"children":[{"type":"text","value":"ovirt-jboss-modules-maven-plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这是ovirt项目团队写的一个maven插件，This plugin is intended to simplify the creation of JBoss Modules in Maven projects."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ovirt-engine使用是jdk1.8，java的原生module是在9才出现。JBOSS自己实现了一套module的机制，需要通过module.xml的文件来声明模块的依赖和资源。"},{"type":"element","tag":"a","props":{"href":"https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.1/html-single/development_guide/index#class_loading_and_modules","rel":["nofollow"]},"children":[{"type":"text","value":"jboss-module-参考资料"}]},{"type":"text","value":"，在engine里面的"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前言","depth":2,"text":"前言"},{"id":"maven","depth":2,"text":"maven"},{"id":"pomxml","depth":2,"text":"pom.xml"},{"id":"plugin","depth":2,"text":"plugin","children":[{"id":"ovirt-jboss-modules-maven-plugin","depth":3,"text":"ovirt-jboss-modules-maven-plugin"}]}]}},"_type":"markdown","_id":"content:blog:ovirt:engine:maven.md","_source":"content","_file":"blog/ovirt/engine/maven.md","_extension":"md"}