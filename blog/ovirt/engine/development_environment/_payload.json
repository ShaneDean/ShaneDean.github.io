[{"data":1,"prerenderedAt":478},["Reactive",2],{"content-query-sFFgW3Y2Ja":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":7,"body":9,"_type":473,"_id":474,"_source":475,"_file":476,"_extension":477},"/blog/ovirt/engine/development_environment","engine",false,"","oVirt Engine 开发环境搭建",{"type":10,"children":11,"toc":455},"root",[12,20,26,33,43,48,62,67,77,82,90,96,106,111,119,130,141,146,167,175,180,185,193,198,211,216,221,226,231,239,244,253,258,263,271,276,284,289,297,311,317,325,332,340,347,352,360,365,373,379,384,389,397,402,410,421,426,436,445,450],{"type":13,"tag":14,"props":15,"children":17},"element","h1",{"id":16},"ovirt-engine-开发环境搭建",[18],{"type":19,"value":8},"text",{"type":13,"tag":21,"props":22,"children":24},"h2",{"id":23},"基础环境",[25],{"type":19,"value":23},{"type":13,"tag":27,"props":28,"children":30},"h3",{"id":29},"安装centos7",[31],{"type":19,"value":32},"安装Centos7",{"type":13,"tag":34,"props":35,"children":36},"p",{},[37],{"type":13,"tag":38,"props":39,"children":42},"img",{"alt":40,"src":41},"image","https://github.com/ShaneDean/file/blob/master/blog/ovirt_engine_env/version.png?raw=true",[],{"type":13,"tag":27,"props":44,"children":46},{"id":45},"安装jdk",[47],{"type":19,"value":45},{"type":13,"tag":34,"props":49,"children":50},{},[51,53],{"type":19,"value":52},"下载最新",{"type":13,"tag":54,"props":55,"children":59},"a",{"href":56,"rel":57},"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html/",[58],"nofollow",[60],{"type":19,"value":61},"jdk8",{"type":13,"tag":34,"props":63,"children":64},{},[65],{"type":19,"value":66},"选择jdk-xxxx-linux-x64.rpm版本",{"type":13,"tag":68,"props":69,"children":71},"pre",{"code":70},"sudo rpm -ivh jdk-xxxx-linux-x64.rpm\n",[72],{"type":13,"tag":73,"props":74,"children":75},"code",{"__ignoreMap":7},[76],{"type":19,"value":70},{"type":13,"tag":34,"props":78,"children":79},{},[80],{"type":19,"value":81},"修改JAVA环境变量",{"type":13,"tag":68,"props":83,"children":85},{"code":84},"vim /etc/profile\n\n//在最后加上，然后wq!\nexport JAVA_HOME=/usr/java/jdk1.8.0_144\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin\n\n//启用配置\nsource /etc/profile\n\n//此时替换掉原有的centos7 java版本 选择你下载的版本\nsudo alternatives --config java\n\n//最后\njava -version\n",[86],{"type":13,"tag":73,"props":87,"children":88},{"__ignoreMap":7},[89],{"type":19,"value":84},{"type":13,"tag":27,"props":91,"children":93},{"id":92},"配置maven350",[94],{"type":19,"value":95},"配置maven3.5.0",{"type":13,"tag":34,"props":97,"children":98},{},[99],{"type":13,"tag":54,"props":100,"children":103},{"href":101,"rel":102},"http://www.cnblogs.com/HendSame-JMZ/p/6122188.html",[58],[104],{"type":19,"value":105},"参考",{"type":13,"tag":27,"props":107,"children":109},{"id":108},"安装git",[110],{"type":19,"value":108},{"type":13,"tag":68,"props":112,"children":114},{"code":113},"sudo yum install git\n",[115],{"type":13,"tag":73,"props":116,"children":117},{"__ignoreMap":7},[118],{"type":19,"value":113},{"type":13,"tag":34,"props":120,"children":121},{},[122,124],{"type":19,"value":123},"速度太慢 替换使用阿里源 ",{"type":13,"tag":54,"props":125,"children":128},{"href":126,"rel":127},"http://mirrors.aliyun.com/help/centos",[58],[129],{"type":19,"value":105},{"type":13,"tag":34,"props":131,"children":132},{},[133,135],{"type":19,"value":134},"ht内部源",{"type":13,"tag":54,"props":136,"children":139},{"href":137,"rel":138},"http://mirrors.ht.com/repo/help/centos.html",[58],[140],{"type":19,"value":105},{"type":13,"tag":27,"props":142,"children":144},{"id":143},"克隆代码",[145],{"type":19,"value":143},{"type":13,"tag":34,"props":147,"children":148},{},[149,151,158,160],{"type":19,"value":150},"代码仓库有2个可选\n一个是",{"type":13,"tag":54,"props":152,"children":155},{"href":153,"rel":154},"https://github.com/oVirt/ovirt-engine",[58],[156],{"type":19,"value":157},"github",{"type":19,"value":159},"，另一个是ovirt项目开发用的",{"type":13,"tag":54,"props":161,"children":164},{"href":162,"rel":163},"https://gerrit.ovirt.org/#/admin/projects/ovirt-engine",[58],[165],{"type":19,"value":166},"gerrit",{"type":13,"tag":68,"props":168,"children":170},{"code":169},"cd /the/path/you/want/\ngit clone https://github.com/oVirt/ovirt-engine.git\ncd ovirt-engine\n//切换分支，我们这里使用ovirt-engine-4.0\ngit branch -a  //查看全部分支\ngit checkout -t origin/ovirt-engine-4.0 //切换分支\n",[171],{"type":13,"tag":73,"props":172,"children":173},{"__ignoreMap":7},[174],{"type":19,"value":169},{"type":13,"tag":27,"props":176,"children":178},{"id":177},"导入项目",[179],{"type":19,"value":177},{"type":13,"tag":34,"props":181,"children":182},{},[183],{"type":19,"value":184},"下载安装intellij idea安装；完成后打开。",{"type":13,"tag":68,"props":186,"children":188},{"code":187},"Import Project -> \n    选择克隆代码路径 -> \nimport project from external model ->\n    选择\u003Cmaven> ->\nEnvironment settings... ->\n    选择3.5.0的MAVEN_HOME->\n    选择Override ->\n->next ... \n->选择新的jdk \n->next ...\n",[189],{"type":13,"tag":73,"props":190,"children":191},{"__ignoreMap":7},[192],{"type":19,"value":187},{"type":13,"tag":34,"props":194,"children":195},{},[196],{"type":19,"value":197},"全部完成后ide会自动去下载依赖",{"type":13,"tag":34,"props":199,"children":200},{},[201,203,209],{"type":19,"value":202},"觉得国外下载速度慢可以",{"type":13,"tag":54,"props":204,"children":207},{"href":205,"rel":206},"http://blog.csdn.net/u010717403/article/details/52188496",[58],[208],{"type":19,"value":105},{"type":19,"value":210},"替换成阿里源或者内部的源",{"type":13,"tag":34,"props":212,"children":213},{},[214],{"type":19,"value":215},"依赖导入完成后就可以阅读代码了",{"type":13,"tag":21,"props":217,"children":219},{"id":218},"开发环境",[220],{"type":19,"value":218},{"type":13,"tag":34,"props":222,"children":223},{},[224],{"type":19,"value":225},"阅读代码的下一步就是把项目跑起来",{"type":13,"tag":27,"props":227,"children":229},{"id":228},"编译",[230],{"type":19,"value":228},{"type":13,"tag":68,"props":232,"children":234},{"code":233},"//关闭单元测试，不然时间太久\nmake install-dev PREFIX=\"/the/path/you/want/\" BUILD_UT=0\n\n//建议时间戳来设置不同的安装目录，不然清理和重新配置的过程会有很多麻烦\n//第一次时间还是会比较久，因为会有一些临时下载的包\n//存在因为网络原因导致失败的情况，请耐心等待\n\n...\n",[235],{"type":13,"tag":73,"props":236,"children":237},{"__ignoreMap":7},[238],{"type":19,"value":233},{"type":13,"tag":34,"props":240,"children":241},{},[242],{"type":19,"value":243},"编译的时候我们可以先去做其他事情",{"type":13,"tag":34,"props":245,"children":246},{},[247,249],{"type":19,"value":248},"成功的效果：\n",{"type":13,"tag":38,"props":250,"children":252},{"alt":40,"src":251},"https://github.com/ShaneDean/file/blob/master/blog/ovirt_engine_env/make_install_dev.png?raw=true",[],{"type":13,"tag":27,"props":254,"children":256},{"id":255},"依赖服务",[257],{"type":19,"value":255},{"type":13,"tag":34,"props":259,"children":260},{},[261],{"type":19,"value":262},"参考ovirt-engine的readme文件",{"type":13,"tag":68,"props":264,"children":266},{"code":265},"- jdk-8 / openjdk-8-jdk / icedtea-8\n- mime-types or mailcap\n- unzip\n- openssl\n- postgresql-server postgresql\n- python-m2crypto / m2crypto\n- python-psycopg2 / psycopg\n- python-jinja2 / Jinja2\n- libxml2-python / libxml2[python]\n- python-daemon\n- otopi >= 1.1.0\n- ovirt-host-deploy >= 1.1.0\n- ovirt-setup-lib\n- maven-3 (optional)\n- pyflakes (optional)\n- python-pep8 / pep8 (optional)\n- patternfly1 (optional)\n- python-docker-py (optional)\n",[267],{"type":13,"tag":73,"props":268,"children":269},{"__ignoreMap":7},[270],{"type":19,"value":265},{"type":13,"tag":34,"props":272,"children":273},{},[274],{"type":19,"value":275},"首先",{"type":13,"tag":68,"props":277,"children":279},{"code":278},"sudo yum install http://plain.resources.ovirt.org/pub/yum-repo/ovirt-release40.rpm\n",[280],{"type":13,"tag":73,"props":281,"children":282},{"__ignoreMap":7},[283],{"type":19,"value":278},{"type":13,"tag":34,"props":285,"children":286},{},[287],{"type":19,"value":288},"然后执行",{"type":13,"tag":68,"props":290,"children":292},{"code":291},"sudo yum install mailcap unzip m2crypto python-psycopg2 python-jinja2 libxml2-python python-daemon otopi ovirt-host-deploy ovirt-setup-lib postgresql-server ovirt-engine-wildfly ovirt-engine-wildfly-overlay patternfly1 pyflakes\n\n\n//\n",[293],{"type":13,"tag":73,"props":294,"children":295},{"__ignoreMap":7},[296],{"type":19,"value":291},{"type":13,"tag":34,"props":298,"children":299},{},[300,302,309],{"type":19,"value":301},"找不到的包去",{"type":13,"tag":54,"props":303,"children":306},{"href":304,"rel":305},"https://rpmfind.net/",[58],[307],{"type":19,"value":308},"rpmfind",{"type":19,"value":310},"里面去下",{"type":13,"tag":312,"props":313,"children":315},"h4",{"id":314},"配置postgresql",[316],{"type":19,"value":314},{"type":13,"tag":68,"props":318,"children":320},{"code":319},"sudo -i\ncd /var/lib/pgsql/data\npostgresql-setup initdb\nvim pg_hba.conf  #增加允许的IP\n",[321],{"type":13,"tag":73,"props":322,"children":323},{"__ignoreMap":7},[324],{"type":19,"value":319},{"type":13,"tag":34,"props":326,"children":327},{},[328],{"type":13,"tag":38,"props":329,"children":331},{"alt":40,"src":330},"https://github.com/ShaneDean/file/blob/master/blog/ovirt_engine_env/postgresql1.png?raw=true",[],{"type":13,"tag":68,"props":333,"children":335},{"code":334},"vim postgresql.conf \n",[336],{"type":13,"tag":73,"props":337,"children":338},{"__ignoreMap":7},[339],{"type":19,"value":334},{"type":13,"tag":34,"props":341,"children":342},{},[343],{"type":13,"tag":38,"props":344,"children":346},{"alt":40,"src":345},"https://github.com/ShaneDean/file/blob/master/blog/ovirt_engine_env/postgresql2.png?raw=true",[],{"type":13,"tag":312,"props":348,"children":350},{"id":349},"增加数据库用户",[351],{"type":19,"value":349},{"type":13,"tag":68,"props":353,"children":355},{"code":354},"systemctl restart postgresql.service\n\nsu postgres\n\npsql\n\n#create user\ncreate user engine password 'engine';\n#create database\ncreate database engine owner engine template template0 encoding 'UTF8' lc_collate 'en_US.UTF-8' lc_ctype 'en_US.UTF-8';\n#exit\n\\q  \n",[356],{"type":13,"tag":73,"props":357,"children":358},{"__ignoreMap":7},[359],{"type":19,"value":354},{"type":13,"tag":312,"props":361,"children":363},{"id":362},"增加jboss环境",[364],{"type":19,"value":362},{"type":13,"tag":68,"props":366,"children":368},{"code":367},"sudo vim /etc/profile\n\n#增加一段    \nexport JBOSS_HOME=/usr/share/ovirt-engine-wildfly\n",[369],{"type":13,"tag":73,"props":370,"children":371},{"__ignoreMap":7},[372],{"type":19,"value":367},{"type":13,"tag":27,"props":374,"children":376},{"id":375},"engine-服务启动",[377],{"type":19,"value":378},"engine 服务启动",{"type":13,"tag":312,"props":380,"children":382},{"id":381},"engine-setup",[383],{"type":19,"value":381},{"type":13,"tag":34,"props":385,"children":386},{},[387],{"type":19,"value":388},"在编译完成后，如果是第一次启动服务我们需要调用ovirt提供的setup脚步来配置初始化服务",{"type":13,"tag":68,"props":390,"children":392},{"code":391},"cd /the/path/you/make/install-dev/\n\n./bin/engine-setup\n\n#后面根据个人需求配置\n",[393],{"type":13,"tag":73,"props":394,"children":395},{"__ignoreMap":7},[396],{"type":19,"value":391},{"type":13,"tag":312,"props":398,"children":400},{"id":399},"start",[401],{"type":19,"value":399},{"type":13,"tag":68,"props":403,"children":405},{"code":404},"./share/ovirt-engine/services/ovirt-engine/ovirt-engine.py start\n\n",[406],{"type":13,"tag":73,"props":407,"children":408},{"__ignoreMap":7},[409],{"type":19,"value":404},{"type":13,"tag":34,"props":411,"children":412},{},[413,415],{"type":19,"value":414},"访问  ++",{"type":13,"tag":54,"props":416,"children":419},{"href":417,"rel":418},"http://127.0.0.1:8080/ovirt-engine/++",[58],[420],{"type":19,"value":417},{"type":13,"tag":312,"props":422,"children":424},{"id":423},"可能出现的错误的解决办法",[425],{"type":19,"value":423},{"type":13,"tag":34,"props":427,"children":428},{},[429],{"type":13,"tag":54,"props":430,"children":433},{"href":431,"rel":432},"http://blog.csdn.net/wangjun_pfc/article/details/5528893",[58],[434],{"type":19,"value":435},"错误1",{"type":13,"tag":34,"props":437,"children":438},{},[439,441],{"type":19,"value":440},"登录效果",{"type":13,"tag":38,"props":442,"children":444},{"alt":40,"src":443},"https://github.com/ShaneDean/file/blob/master/blog/ovirt_engine_env/webadmin1.png?raw=true",[],{"type":13,"tag":21,"props":446,"children":448},{"id":447},"调试环境",[449],{"type":19,"value":447},{"type":13,"tag":34,"props":451,"children":452},{},[453],{"type":19,"value":454},"服务起来后的下一步就是启用调试环境，可以断点调试",{"title":7,"searchDepth":456,"depth":456,"links":457},2,[458,467,472],{"id":23,"depth":456,"text":23,"children":459},[460,462,463,464,465,466],{"id":29,"depth":461,"text":32},3,{"id":45,"depth":461,"text":45},{"id":92,"depth":461,"text":95},{"id":108,"depth":461,"text":108},{"id":143,"depth":461,"text":143},{"id":177,"depth":461,"text":177},{"id":218,"depth":456,"text":218,"children":468},[469,470,471],{"id":228,"depth":461,"text":228},{"id":255,"depth":461,"text":255},{"id":375,"depth":461,"text":378},{"id":447,"depth":456,"text":447},"markdown","content:blog:ovirt:engine:development_environment.md","content","blog/ovirt/engine/development_environment.md","md",1718158598648]