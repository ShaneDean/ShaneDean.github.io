const __vite__fileDeps=["./BYKcEOR4.js","./DMsBHW3d.js","./BSZFgSs5.js","./Dpa4DzZS.js","./DvDH6DOc.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{a9 as R,E as w,aa as x,ab as T,ac as j,ad as L,j as q,a4 as P,O as I,ae as Q,s as k,k as F,a3 as M,af as A,i as p,A as H,B as K,Q as N,_ as U}from"./DMsBHW3d.js";import{h as C}from"./DvDH6DOc.js";import{u as O}from"./Dpa4DzZS.js";const z=e=>e==="defer"||e===!1;function ne(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(t);let[r,i,a={}]=e;if(typeof r!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=I(),n=i,u=()=>null,l=()=>s.isHydrating?s.payload.data[r]:s.static.data[r];a.server=a.server??!0,a.default=a.default??u,a.getCachedData=a.getCachedData??l,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??R.deep,a.dedupe=a.dedupe??"cancel";const m=()=>a.getCachedData(r,s)!=null;if(!s._asyncData[r]||!a.immediate){s.payload._errors[r]??=null;const f=a.deep?w:x;s._asyncData[r]={data:f(a.getCachedData(r,s)??a.default()),pending:w(!m()),error:T(s.payload._errors,r),status:w("idle")}}const o={...s._asyncData[r]};o.refresh=o.execute=(f={})=>{if(s._asyncDataPromises[r]){if(z(f.dedupe??a.dedupe))return s._asyncDataPromises[r];s._asyncDataPromises[r].cancelled=!0}if((f._initial||s.isHydrating&&f._initial!==!1)&&m())return Promise.resolve(a.getCachedData(r,s));o.pending.value=!0,o.status.value="pending";const y=new Promise((h,c)=>{try{h(n(s))}catch(g){c(g)}}).then(async h=>{if(y.cancelled)return s._asyncDataPromises[r];let c=h;a.transform&&(c=await a.transform(h)),a.pick&&(c=W(c,a.pick)),s.payload.data[r]=c,o.data.value=c,o.error.value=null,o.status.value="success"}).catch(h=>{if(y.cancelled)return s._asyncDataPromises[r];o.error.value=Q(h),o.data.value=k(a.default()),o.status.value="error"}).finally(()=>{y.cancelled||(o.pending.value=!1,delete s._asyncDataPromises[r])});return s._asyncDataPromises[r]=y,s._asyncDataPromises[r]},o.clear=()=>G(s,r);const D=()=>o.refresh({_initial:!0}),B=a.server!==!1&&s.payload.serverRendered;{const f=F();if(f&&!f._nuxtOnBeforeMountCbs){f._nuxtOnBeforeMountCbs=[];const c=f._nuxtOnBeforeMountCbs;j(()=>{c.forEach(g=>{g()}),c.splice(0,c.length)}),L(()=>c.splice(0,c.length))}B&&s.isHydrating&&(o.error.value||m())?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):f&&(s.payload.serverRendered&&s.isHydrating||a.lazy)&&a.immediate?f._nuxtOnBeforeMountCbs.push(D):a.immediate&&D();const y=M();if(a.watch){const c=q(a.watch,()=>o.refresh());y&&P(c)}const h=s.hook("app:data:refresh",async c=>{(!c||c.includes(r))&&await o.refresh()});y&&P(h)}const v=Promise.resolve(s._asyncDataPromises[r]).then(()=>o);return Object.assign(v,o),v}function G(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=null),e._asyncData[t]&&(e._asyncData[t].data.value=void 0,e._asyncData[t].error.value=null,e._asyncData[t].pending.value=!1,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t].cancelled=!0,e._asyncDataPromises[t]=void 0)}function W(e,t){const r={};for(const i of t)r[i]=e[i];return r}const b=(e,t)=>t.split(".").reduce((r,i)=>r&&r[i],e),_=(e,t)=>Object.keys(e).filter(t).reduce((r,i)=>Object.assign(r,{[i]:e[i]}),{}),se=e=>t=>e&&e.length?_(t,r=>!e.includes(r)):t,ie=e=>t=>Array.isArray(t)?t.map(r=>e(r)):e(t),$=e=>{const t=[],r=[];for(const i of e)["$","_"].includes(i)?t.push(i):r.push(i);return{prefixes:t,properties:r}},oe=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:r,properties:i}=$(e);return _(t,a=>!i.includes(a)&&!r.includes(a[0]))},ce=(e=[])=>t=>{if(e.length===0||!t)return t;const{prefixes:r,properties:i}=$(e);return _(t,a=>i.includes(a)||r.includes(a[0]))},ue=(e,t)=>{const r=new Intl.Collator(t.$locale,{numeric:t.$numeric,caseFirst:t.$caseFirst,sensitivity:t.$sensitivity}),i=Object.keys(t).filter(a=>!a.startsWith("$"));for(const a of i)e=e.sort((s,n)=>{const u=[b(s,a),b(n,a)].map(l=>{if(l!==null)return l instanceof Date?l.toISOString():l});return t[a]===-1&&u.reverse(),r.compare(u[0],u[1])});return e},le=(e,t="Expected an array")=>{if(!Array.isArray(e))throw new TypeError(t)},d=e=>Array.isArray(e)?e:[void 0,null].includes(e)?[]:[e],J=["sort","where","only","without"];function V(e,t={}){const r={};for(const n of Object.keys(t.initialParams||{}))r[n]=J.includes(n)?d(t.initialParams[n]):t.initialParams[n];const i=(n,u=l=>l)=>(...l)=>(r[n]=u(...l),s),a=n=>t.legacy?n?.surround?n.surround:n&&(n?.dirConfig&&(n.result={_path:n.dirConfig?._path,...n.result,_dir:n.dirConfig}),n?._path||Array.isArray(n)||!Object.prototype.hasOwnProperty.call(n,"result")?n:n?.result):n,s={params:()=>({...r,...r.where?{where:[...d(r.where)]}:{},...r.sort?{sort:[...d(r.sort)]}:{}}),only:i("only",d),without:i("without",d),where:i("where",n=>[...d(r.where),...d(n)]),sort:i("sort",n=>[...d(r.sort),...d(n)]),limit:i("limit",n=>parseInt(String(n),10)),skip:i("skip",n=>parseInt(String(n),10)),find:()=>e(s).then(a),findOne:()=>e(i("first")(!0)).then(a),count:()=>e(i("count")(!0)).then(a),locale:n=>s.where({_locale:n}),withSurround:i("surround",(n,u)=>({query:n,...u})),withDirConfig:()=>i("dirConfig")(!0)};return t.legacy&&(s.findSurround=(n,u)=>s.withSurround(n,u).find().then(a)),s}function S(e){return JSON.stringify(e,X)}function X(e,t){return t instanceof RegExp?`--REGEX ${t.toString()}`:t}const Y=e=>{let t=S(e);return t=typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t),t=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),(t.match(/.{1,100}/g)||[]).join("/")},E=e=>A(e,p().public.content.api.baseURL),fe=()=>{throw console.warn("useContent is only accessible when you are using `documentDriven` mode."),console.warn("Learn more by visiting: https://content.nuxt.com/document-driven"),new Error("useContent is only accessible when you are using `documentDriven` mode.")},Z=()=>{const{experimental:e}=p().public.content;return e.clientDB?!0:O().isEnabled()},ee=()=>async e=>{const{content:t}=p().public,r=e.params(),i=t.experimental.stripQueryParameters?E(`/query/${`${C(r)}.${t.integrity}`}/${Y(r)}.json`):E(`/query/${C(r)}.${t.integrity}.json`);if(Z())return(await U(()=>import("./BYKcEOR4.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(n=>n.useContentDatabase())).fetch(e);const a=await $fetch(i,{method:"GET",responseType:"json",params:t.experimental.stripQueryParameters?void 0:{_params:S(r),previewToken:O().getPreviewToken()}});if(typeof a=="string"&&a.startsWith("<!DOCTYPE html>"))throw new Error("Not found");return a};function de(e,...t){const{content:r}=p().public,i=V(ee(),{initialParams:typeof e!="string"?e:{},legacy:!0});let a;typeof e=="string"&&(a=H(K(e,...t)));const s=i.params;return i.params=()=>{const n=s();return a&&(n.where=n.where||[],n.first&&(n.where||[]).length===0?n.where.push({_path:N(a)}):n.where.push({_path:new RegExp(`^${a.replace(/[-[\]{}()*+.,^$\s/]/g,"\\$&")}`)})),n.sort?.length||(n.sort=[{_file:1,$numeric:!0}]),r.locales.length&&(n.where?.find(l=>l._locale)?._locale||(n.where=n.where||[],n.where.push({_locale:r.defaultLocale}))),n},i}export{ne as a,le as b,d as c,ue as d,Y as e,ie as f,b as g,oe as h,ce as i,S as j,V as k,se as o,de as q,Z as s,fe as u,E as w};
